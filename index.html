<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat SL V.2.3.0</title>
<style>
:root{
  --neon-blue:#00f0ff;
  --neon-purple:#b300ff;
  --neon-pink:#ff00d4;
}
body{margin:0; padding:0; font-family:'Roboto',sans-serif; background:#111; overflow:hidden;}

button{cursor:pointer;}
/* Bot√£o flutuante do chat */
#chatBtnFloat{
  position:fixed; bottom:20px; right:20px; z-index:1000;
  width:60px; height:60px; border-radius:50%; background:linear-gradient(45deg,var(--neon-blue),var(--neon-purple),var(--neon-pink));
  color:#fff; font-weight:bold; border:none; display:flex; align-items:center; justify-content:center;
  font-size:1.2rem; box-shadow:0 0 10px #000; transition:0.3s;
}
#chatBtnFloat:hover{transform:scale(1.1);}

/* POPUPS FLUTUANTES */
.popup{
  position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  background:rgba(0,0,0,0.95); color:#fff; padding:15px; border-radius:12px;
  border:2px solid var(--neon-blue); z-index:999; display:none;
}
.popup h3{margin-top:0;}
.popup input{display:block; width:200px; margin:5px 0; padding:5px; border-radius:5px; border:1px solid #888;}
.popup button{padding:5px 10px; margin-top:5px; border-radius:5px;}

/* Botoes flutuantes de minimizar e fechar */
.popup .topBar{display:flex; justify-content:space-between; align-items:center;}
.popup .topBar span{cursor:pointer; font-weight:bold; font-size:1rem;}

/* CHAT FLUTUANTE */
#chatContainer{
  width:540px; height:430px; background:rgba(0,0,0,0.9);
  border:2px solid var(--neon-blue); border-radius:10px;
  display:flex; flex-direction:column; position:fixed; bottom:100px; right:20px; z-index:998;
  overflow:hidden; display:none;
}
#chatHeader{background:rgba(20,20,20,0.95); padding:5px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #555;}
#chatMessages{flex:1; overflow-y:auto; padding:5px; color:#fff;}
#chatInputContainer{display:flex; padding:5px; border-top:1px solid #555;}
#chatInput{flex:1; padding:5px; border-radius:5px; border:1px solid #555;}
#chatInputContainer button{padding:5px 10px; margin-left:5px;}

/* Engrenagem de Configura√ß√µes */
#settingsGear{
  position:absolute; top:5px; right:5px; width:25px; height:25px; cursor:pointer;
  background:var(--neon-purple); border-radius:50%; display:flex; align-items:center; justify-content:center;
  font-weight:bold; color:#fff;
}
#settingsPanel{
  position:absolute; top:35px; right:5px; width:250px; background:rgba(0,0,0,0.95);
  border:2px solid var(--neon-blue); border-radius:10px; padding:10px; display:none; color:#fff;
}
#settingsPanel label{display:block; margin:5px 0;}
#settingsPanel input, #settingsPanel select{width:100%; padding:5px; margin:3px 0; border-radius:5px; border:1px solid #555;}
</style>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto&family=Press+Start+2P&family=Montserrat&family=Lobster&family=Pacifico&family=Oswald&family=Raleway&family=Open+Sans&family=Roboto+Mono&family=Poppins&family=Ubuntu&family=Nunito&family=Comfortaa&family=Quicksand&family=Playfair+Display&family=Fira+Sans&family=Merriweather&family=Anton&family=Bebas+Neue&family=Caveat&family=Chakra+Petch&family=Exo+2&family=Archivo+Black&family=Indie+Flower&family=Inconsolata&family=Josefin+Sans&family=Kanit&family=Lato&family=Lexend&family=Manrope&family=Nanum+Gothic&family=Righteous&family=Signika&family=Varela+Round&family=Work+Sans&family=Yanone+Kaffeesatz&display=swap" rel="stylesheet">

<body>

<!-- BOT√ÉO FLUTUANTE -->
<button id="chatBtnFloat" onclick="toggleChat()">üí¨</button>

<!-- LOGIN -->
<div id="loginPopup" class="popup">
  <div class="topBar">
    <span>Login</span>
    <span onclick="closePopup('loginPopup')">X</span>
  </div>
  <input type="text" id="loginUser" placeholder="Usu√°rio">
  <input type="password" id="loginPass" placeholder="Senha">
  <button onclick="login()">Entrar</button>
  <p>Criar conta? <span style="color:#0ff; cursor:pointer;" onclick="showRegister()">Clique aqui</span></p>
  <span onclick="minimizePopup('loginPopup')" style="cursor:pointer; color:#0ff;">_</span>
</div>

<!-- REGISTRO -->
<div id="registerPopup" class="popup">
  <div class="topBar">
    <span>Cadastro</span>
    <span onclick="closePopup('registerPopup')">X</span>
  </div>
  <input type="text" id="regUser" placeholder="Usu√°rio">
  <input type="password" id="regPass" placeholder="Senha">
  <input type="password" id="regPassConfirm" placeholder="Confirmar senha">
  <button onclick="register()">Registrar</button>
  <p>J√° tem conta? <span style="color:#0ff; cursor:pointer;" onclick="showLogin()">Login</span></p>
  <span onclick="minimizePopup('registerPopup')" style="cursor:pointer; color:#0ff;">_</span>
</div>

<!-- CHAT FLUTUANTE -->
<div id="chatContainer">
  <div id="chatHeader">
    Chat SL
    <div style="display:flex; gap:5px;">
      <div id="settingsGear" onclick="toggleSettings()">‚öô</div>
      <span style="cursor:pointer;" onclick="minimizeChat()">_</span>
    </div>
  </div>
  <div id="chatMessages"></div>
  <div id="chatInputContainer">
    <input id="chatInput" placeholder="Digite sua mensagem...">
    <button onclick="sendMessage()">Enviar</button>
  </div>
  <div id="settingsPanel">
    <label>Cor do fundo:</label>
    <input type="color" id="bgColorPicker" onchange="changeBGColor()">
    <label>Background animado:</label>
    <select id="bgSelect" onchange="changeBGSelect()">
      <option value="none">Nenhum</option>
      <option value="https://xatframe.github.io/xatframes/RobFerrari_Balloons.html">Baloons</option>
      <option value="https://xatframe.github.io/xatframes/lafleur_sea.html">Lafleur</option>
      <option value="https://xatframe.github.io/xatframes/robferrari_xneon.html">Neon</option>
    </select>
    <label>Status:</label>
    <select id="statusSelect" onchange="changeStatus()">
      <option value="online">Online</option>
      <option value="ausente">Ausente</option>
      <option value="ocupado">Ocupado</option>
    </select>
  </div>
</div>

<script>
let users = {};
let currentUser = null;
let chatMinimized=false;

function toggleChat(){
  const chat=document.getElementById('chatContainer');
  chat.style.display=(chat.style.display==='flex')?'none':'flex';
}

function minimizeChat(){
  const chat=document.getElementById('chatContainer');
  chat.style.display='none';
}

function closePopup(id){ document.getElementById(id).style.display='none'; }
function minimizePopup(id){ 
  const el=document.getElementById(id);
  el.style.display='none';
}

function showRegister(){ document.getElementById('loginPopup').style.display='none'; document.getElementById('registerPopup').style.display='block'; }
function showLogin(){ document.getElementById('registerPopup').style.display='none'; document.getElementById('loginPopup').style.display='block'; }

function register(){
  let user=document.getElementById('regUser').value;
  let pass=document.getElementById('regPass').value;
  let passC=document.getElementById('regPassConfirm').value;
  if(!user||!pass){ alert("Preencha todos os campos"); return; }
  if(pass!==passC){ alert("Senhas n√£o conferem"); return; }
  if(users[user]){ alert("Usu√°rio j√° existe"); return; }
  users[user]={pass:pass, settings:{bg:'none', status:'online'}};
  alert("Conta criada!");
  showLogin();
}

function login(){
  let user=document.getElementById('loginUser').value;
  let pass=document.getElementById('loginPass').value;
  if(users[user] && users[user].pass===pass){
    currentUser=user;
    document.getElementById('loginPopup').style.display='none';
    document.getElementById('chatContainer').style.display='flex';
    loadUserSettings();
  } else alert("Usu√°rio ou senha incorreto");
}

function sendMessage(){
  let input=document.getElementById('chatInput');
  if(input.value.trim()==='') return;
  let msg=document.createElement('div');
  msg.innerHTML=`<b>${currentUser}:</b> ${input.value}`;
  document.getElementById('chatMessages').appendChild(msg);
  input.value='';
  document.getElementById('chatMessages').scrollTop=document.getElementById('chatMessages').scrollHeight;
}

function loadUserSettings(){
  if(users[currentUser].settings.bg && users[currentUser].settings.bg!=='none'){
    document.body.style.backgroundImage=`url('${users[currentUser].settings.bg}')`;
  }
}

function toggleSettings(){
  const panel=document.getElementById('settingsPanel');
  panel.style.display=(panel.style.display==='block')?'none':'block';
}

function changeBGColor(){
  document.body.style.backgroundImage='none';
  document.body.style.backgroundColor=document.getElementById('bgColorPicker').value;
}

function changeBGSelect(){
  const val=document.getElementById('bgSelect').value;
  if(val==='none'){ document.body.style.backgroundImage='none'; return; }
  document.body.style.backgroundImage=`url('${val}')`;
}

function changeStatus(){
  users[currentUser].settings.status=document.getElementById('statusSelect').value;
}
</script>

</body>
</html>
